# DeepFaissChat

*English Below*

---

***このパッケージは三つのプログラムで構成されています。***

1. **EMBED-IT**: URLやサイトマップからテキストを取得・Embeddingします。PDFやCSVのテキストも使えます。このプロセスにより、テキストのベクトル表現を保存した "vectors.npy" と、それに対応する参照テキストを保存した "reference.json" が生成されます。
   - [コードを見る](https://gitfront.io/r/user-7947009/YwRSkzRF9MHR/EMBED-IT/)
   - クローン: `git clone https://gitfront.io/r/user-7947009/YwRSkzRF9MHR/EMBED-IT.git`

2. **DeepFaissChat**: Chat Botのレスポンスを生成するバックエンドです。
   1. Demoバージョンでは、手動で`app.py`と同じ階層に`dir_{member_id}`フォルダを作成してください（`member_id`は任意ですが、**Me_Cool_Custom_Line_Bot**で設定するMember IDと一致する必要があります）。
   2. **EMBED-IT**で生成した "vectors.npy" と "reference.json" を上記フォルダに配置。
   3. `/config/member_id` でOpenAIのAPIキー等の設定（HTTP Basic認証の初期値は admin/password）。
   - [コードを見る](https://gitfront.io/r/user-7947009/BUNDUzo5yGM9/DeepFaissChat/)
   - クローン: `git clone https://gitfront.io/r/user-7947009/BUNDUzo5yGM9/DeepFaissChat.git`

3. **Me_Cool_Custom_Line_Bot**: クライアント側のWPプラグインです。
   1. **DeepFaissChat**で作成した `dir_{member_id}` の `member_id` をMember IDに設定。
   2. APP URLはローカルでテストする場合 `http://localhost:8080/`。
   3. "Backend Config" ボタンから **DeepFaissChat** の `/config/member_id` にアクセス。
   - [コードを見る](https://gitfront.io/r/user-7947009/NDq3mx4UMsBN/Me-Cool-Custom-Line-Bot/)
   - クローン: `git clone https://gitfront.io/r/user-7947009/NDq3mx4UMsBN/Me-Cool-Custom-Line-Bot.git`

---

## 使用方法

- プロジェクトフォルダ内でPython 3の仮想環境を作成します。
- 仮想環境から `pip install -r requirements.txt` コマンドで必要なライブラリをインストールします。
- 仮想環境から `python app.py` または `nohup python app.py &` を実行してアプリケーションを立ち上げます。

### 注意: Server Sent Eventのサポートが必須です
このアプリケーションはServer Sent Eventを使用しているため、Server Sent Eventがサポートされている環境でのみ動作します。EC2などのインスタンスを使用する場合は、Apacheサーバーを設定し、ポート8080でリバースプロキシを設定してください。

### ローカルでのテスト
ローカルでテストする場合は、MAMPを使用してWPプラグインのクライアントを立ち上げれば、ローカル環境でもテストが可能です。

## 注意事項

このリポジトリは、アプリケーションのアイディア、またはコーディングスキルを評価していただく目的で特定のエンティティに共有しております。以下のポイントにご留意いただけますと幸いです。

### 使用について

- このコードは、アプリケーションのアイディア、またはコーディング能力の評価を目的としています。
- 評価以外での使用はご遠慮いただきますようお願い申し上げます。

### 秘密保持について

- このリポジトリを閲覧することで、秘密保持に関する同意をいただいたものとさせていただきます。
- 評価以外の目的で第三者との共有はご遠慮いただきますようお願い申し上げます。

---

***This package consists of three programs.***

1. **EMBED-IT**: Extracts and embeds text from URLs or sitemaps. Text from PDFs and CSVs can also be used. This process generates "vectors.npy," which stores the vector representations of the text, and "reference.json," which stores the corresponding reference text.
   - [View Code](https://gitfront.io/r/user-7947009/YwRSkzRF9MHR/EMBED-IT/)
   - Clone: `git clone https://gitfront.io/r/user-7947009/YwRSkzRF9MHR/EMBED-IT.git`

2. **DeepFaissChat**: Backend for generating Chat Bot responses.
   1. In the demo version, manually create a `dir_{member_id}` folder at the same level as `app.py` (the `member_id` should match the Member ID set in **Me_Cool_Custom_Line_Bot**).
   2. Place the "vectors.npy" and "reference.json" generated by **EMBED-IT** into the folder created above.
   3. Configure OpenAI API keys and other settings at `/config/member_id` (Initial HTTP Basic Authentication is admin/password).
   - [View Code](https://gitfront.io/r/user-7947009/BUNDUzo5yGM9/DeepFaissChat/)
   - Clone: `git clone https://gitfront.io/r/user-7947009/BUNDUzo5yGM9/DeepFaissChat.git`

3. **Me_Cool_Custom_Line_Bot**: Client-side WP Plugin.
   1. Set the `member_id` from the `dir_{member_id}` created in **DeepFaissChat** as the Member ID.
   2. The APP URL is `http://localhost:8080/` when testing locally.
   3. Access **DeepFaissChat**'s `/config/member_id` from the "Backend Config" button.
   - [View Code](https://gitfront.io/r/user-7947009/NDq3mx4UMsBN/Me-Cool-Custom-Line-Bot/)
   - Clone: `git clone https://gitfront.io/r/user-7947009/NDq3mx4UMsBN/Me-Cool-Custom-Line-Bot.git`

---

## How to Use

- Create a Python 3 virtual environment within the project folder.
- From the virtual environment, run the `pip install -r requirements.txt` command to install the required libraries.
- From the virtual environment, execute `python app.py` or `nohup python app.py &` to launch the application.

### Note: Server Sent Event Support is Required
This application utilizes Server Sent Events and will only function in environments that support this technology. If you are using an instance like EC2, please configure an Apache server and set up a reverse proxy on port 8080.

### Local Testing
For local testing, you can launch the WP plugin client using MAMP, making it possible to test in a local environment.

## Important Notice

This repository is shared with specific entities for the purpose of evaluating either the application idea or coding skills. Your attention to the following points would be greatly appreciated.

### Usage Guidelines

- This code is intended solely for the evaluation of either the application idea or coding skills.
- Please refrain from using it for any purpose other than evaluation.

### Confidentiality Agreement

- By accessing this repository, you agree to adhere to a confidentiality agreement.
- Please refrain from sharing this code with third parties for purposes other than evaluation.
